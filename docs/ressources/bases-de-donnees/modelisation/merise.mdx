---
position: 1
title: "Mod√©lisation avec Merise"
description: "Voyons ensemble comment on peut mod√©liser une base de donn√©es avec Merise !"
tags:
  - Conception
  - Base de donn√©es
  - Merise
  - Dictionnaire de Donn√©es
  - Mod√®le Conceptuel de Donn√©es (MCD)
  - Mod√®le Logique de Donn√©es (MLD)
  - Mod√®le Relationnel de Donn√©es (MRD)
  - Mod√®le Physique de Donn√©es (MPD)
  - DWWM
---

import Admonition from '@theme/Admonition';
import TabItem from '@theme/TabItem';
import Tabs from '@theme/Tabs';

# Mod√©lisation d'une base de donn√©es avec Merise

## Introduction

Si jamais tu n'es pas au courant, on recommande _(pour ne pas ainsi dire qu'on oblige üôÉ)_ les concepteurs et d√©veloppeurs d'applications √† mod√©liser leur base de donn√©es avant de commencer √† coder.

Mais alors, quel est r√©ellement l'int√©r√™t derri√®re ces sch√©mas qui sont parfois consid√©r√©s comme faisant partie d'une √©tape fastidieuse et inutile ?

Eh bien, la mod√©lisation d'une base de donn√©es permet de :

- Comprendre les besoins du client final
- Faciliter la communication entre les diff√©rents acteurs du projet
- √âviter les erreurs de conception _(ou pas üòÖ)_

## Mod√©lisation avec Merise

[Merise](https://fr.wikipedia.org/wiki/Merise_(informatique)) est une m√©thode d'analyse, de conception et de gestion de projet informatique.  
Pour faire plus simple que cette premi√®re phrase toute droit sortie de Wikip√©dia, Merise est une m√©thode qui permet entre autres de mod√©liser une base de donn√©es.

M√™me si dans cette documentation on va parler uniquement de la conception qui concerne la base de donn√©es,
je t'ai fait un court r√©sum√© des diff√©rentes √©tapes principale de la m√©thode Merise.

## Les diff√©rentes √©tapes principales

1. **L'analyse des besoins** : On commence par recueillir les besoins du client pour notre cahier des charges.
2. **La conception** : On mod√©lise la base de donn√©es en utilisant les diff√©rents outils de Merise.
3. **L'impl√©mentation** : On passe √† la phase de d√©veloppement en utilisant les mod√®les cr√©√©s pr√©c√©demment.
4. **La mise en service** : On met en service l'application et on la teste.
5. **La maintenance** : On assure la maintenance de l'application.

## Les diff√©rents mod√®les

### Le Mod√®le Conceptuel de Donn√©es _(MCD)_

Ce mod√®le a pour objectif de repr√©senter sous forme graphique les donn√©es et les relations entre ces donn√©es.  
Avant le MCD, nous sommes en th√©orie en possession du dictionnaire de donn√©es
qui contient toutes les informations qui vont nous √™tre utiles.

Il est important de noter que l'on doit rester le plus clair possible dans la repr√©sentation des donn√©es,
car ce mod√®le doit √™tre compris par tout le monde : y compris le client final.

Chaque regroupement de donn√©es est appel√© une entit√©, et chaque entit√© est compos√©e d'attributs.  
Les relations entre les entit√©s sont repr√©sent√©es par trois √©l√©ments :

- Un trait reliant les entit√©s _(ou la m√™me entit√© dans le cas d'une relation r√©flexive)_
- Un verbe qui d√©crit la relation √† l'**infinitif**
- Une cardinalit√© pour quantifier la relation entre les entit√©s

<Admonition title="Quelques d√©finitions avant d'aller plus en profondeur">
  - **Entit√©** : Regroupement de donn√©es, repr√©sent√©e par un rectangle jaune dans le sch√©ma ci-dessous.
  - **Attribut** : Propri√©t√© d'une entit√©
      - **Discriminant** _(ou d√©terminant)_ : Attribut qui permet de distinguer les occurrences d'une entit√©. Il est soulign√© et en gras dans le sch√©ma.
      - **Attribut unique** : Attribut qui ne peut pas avoir la m√™me valeur pour deux occurrences d'une entit√©. Il est en gras dans le sch√©ma.
  - **Relation** : Lien entre deux entit√©s, repr√©sent√©e par un trait reliant les entit√©s.
  - **Cardinalit√©** : Nombre d'occurrences _(minimum et maximum)_ d'une entit√© qui peuvent √™tre associ√©es √† une occurrence d'une autre entit√©.
</Admonition>

C'est pas clair ? Prenons alors ce mod√®le !
![Mod√®le Conceptuel de Donn√©es, MCD](./img/mcd-guide.webp)

Ce mod√®le nous indique plusieurs choses :

<Tabs>
  <TabItem value="entities" label="Entit√©s">
    - Deux entit√©s sont pr√©sentes :
        - `Entit√© 1` et `Entit√© 2`
    - L'entit√© `Entit√© 1` poss√®de quatre attributs :
        - `code entit√© 1` _(discriminant)_
        - `attribut 2`
        - `attribut 3`
        - `attribut 4`
    - L'entit√© `Entit√© 2` poss√®de trois attributs :
        - `code entit√© 2` _(discriminant)_
        - `attribut 2`
        - `attribut 3`

    <Admonition type="quote" title="Pourquoi il n'y a pas d'ID dans le sch√©ma ?">
      Avant d'expliquer **pourquoi** il n'y a pas d'ID, je me permets de faire un petit √©cart pour expliquer **ce qu'est** un ID.

      `ID`, c'est le nom qu'on donne pour parler de l'identifiant qui se doit d'√™tre unique afin d'identifier facilement une ressource d'une autre.  
      
      Il s'agit, en r√©alit√©, d'une donn√©e purement technique.  
      Apr√®s tout, c'est pas le client final qui va s'int√©resser √† l'ID de ses donn√©es, n'est-ce pas ?

      Comme le MCD se doit d'√™tre **non-technique**, le terme `ID` n'est donc pas pertinent et surtout : n'a pas sa place.

      En reprenant le sch√©ma ci-dessus, on peut dire que le `code entit√© 1` et le `code entit√© 2` sont les d√©terminants de leurs entit√©s respectives.  
      Une fois qu'on fera nos sch√©mas techniques _(MLD, MRD, MPD)_, on pourra alors utiliser le terme `ID` !
    </Admonition>
  </TabItem>

  <TabItem value="relations" label="Relations et cardinalit√©s">
    - Une relation :
        - Entre `Entit√© 1` et `Entit√© 2`
    - Cardinalit√© :
        - `Entit√© 1` peut poss√©der de 1 √† 1 occurrence de `Entit√© 2`
        - `Entit√© 2` peut √™tre poss√©d√©e par 0 √† n occurrences de `Entit√© 1`
    - Verbe :
        - `POSS√âDER`
        
    Si on revient √† la d√©claration faite plus t√¥t, on remarque qu'il est effectivement √† l'**infinitif**.  
    Mais alors, pourquoi c'est important ?

    En fait, le verbe √† l'infinitif permet de faciliter la compr√©hension des relations et ce, dans les deux sens.  
    
    Mais parlons des cardinalit√©s parce qu'on y retrouve quelque chose de bizarre : `n`.  
    C'est quoi `n` ?

    `n` est une valeur qui signifie que l'entit√© peut √™tre poss√©d√©e par un nombre ind√©fini d'occurrences de l'autre entit√©.
    C'est une notation que l'on retrouvera tr√®s fr√©quemment, puisque la majorit√© du temps on ne peut pas d√©terminer le nombre exact d'occurrences.

    <Admonition type="quote" label="Mais est-il possible d'indiquer une valeur d√©finie, comme `42` par exemple ?">
      Oui ! Si tu connais √† l'avance le nombre maximal d'occurrences et que ce nombre est fixe _(peu importe le contexte)_, tu peux tout √† fait le sp√©cifier.

      Par exemple : demain on te demande de mod√©liser une base de donn√©es avec deux entit√©s `Ann√©e` et `Mois`.

      Tu peux donc repr√©senter la relation de cette mani√®re :
      
      > `Ann√©e 1,12 - POSS√âDER - 1,1 Mois`  
      > `Ann√©e` poss√®de de 1 √† 12 occurrences de `Mois`  
      > `Mois` est poss√©d√©e par une seule occurrence de `Ann√©e`

      C'est un exemple simple, mais qui montre bien que c'est possible !
    </Admonition>
  </TabItem>
</Tabs>

Tiens d'ailleurs, autre sujet important pour le **MCD** !

On a vu que certains termes ne sont pas employ√©s _(comme `ID`, mais √©galement `tables`, `cl√© primaire` ou encore `cl√© √©trang√®re`)_
pour respecter la nature du document qui se veut non-technique.  
Mais il y a autre chose qui peut nous sauter aux yeux : c'est √©crit en fran√ßais !

La raison est identique √† ce que j'ai pu rab√¢cher plus t√¥t : le document doit √™tre compris par tout le monde.  
Et si le client final est francophone, il est donc plus simple de lui pr√©senter un document dans sa langue maternelle.

<Admonition type="quote" title="Mouais, toujours pas convaincu par le MCD">
  Tant pis pour toi ! üòú  
  Si je devais te donner un argument majeur, ce serait celui-ci. Apr√®s j'abandonne, promis !

  Ton client est un sp√©cialiste dans son domaine, mais toi tu n'y connais rien.  
  Il te parle de certaines donn√©es, tu arrives √† peu pr√®s √† comprendre comment √ßa fonctionne, mais tu n'as pas toutes les informations.

  D'une part, le dictionnaire de donn√©es t'en donne la nature et "qui" _(l'entit√©)_ poss√®de ces donn√©es.  
  Par contre, comme le MCD te permet de quantifier et de qualifier les relations entre les entit√©s, tu as une vision plus claire de ce que le client veut.

  Et si le client comprend et valide le MCD, c'est que tu as bien compris ses besoins et que tu peux donc passer √† la suite du projet sans foncer dans le mur,
  ce qui t'obligerai de d√©construire et de reconstruire une partie de ton application.
</Admonition>

### Le Mod√®le Logique de Donn√©es _(MLD)_

√Ä partir de maintenant, on "abandonne" le client et on dit bonjour √† la technique ! ‚öôÔ∏è

Le **Mod√®le Logique de Donn√©es** est une √©tape interm√©diaire entre le MCD et le MPD.  
Il se base de mani√®re directe sur le MCD, mais il ajoute des √©l√©ments techniques qui vont permettre de nous assurer **avant** de faire
la base de donn√©es que tout est correct.

En reprenant l'exemple donn√© pour le MCD, voici le MLD correspondant.

![Mod√®le Logique de Donn√©es, MLD](./img/mld-guide.webp)

Ici, on ne parle plus d'entit√©s, mais de tables.  
Et ce qui √©tait soulign√© avant _(les d√©terminants)_ devient des cl√©s primaires.
De mani√®re g√©n√©rale, on y retrouvera le terme `id` pour les cl√©s primaires m√™me si ce n'est pas une obligation.

<Admonition type="quote" title="O√π qu'elles sont les relations ?">
  Bien vu ! Elles sont totalement disparues... enfin presque.

  Si tu regardes de plus pr√®s, tu peux voir que la table nomm√©e `table_1` s'est vue ajouter une colonne `table_2_id`.
  Mais qu'est-ce que c'est ?

  Il s'agit d'une r√©f√©rence vers la table `table_2` : c'est ce qu'on appelle une **cl√© √©trang√®re**.  
  Le but des cl√©s √©trang√®res est de lier les tables entre elles, et donc de recr√©er les relations que l'on avait dans le MCD.

  Une cl√© √©trang√®re pointe syst√©matiquement vers une cl√© primaire d'une autre table _(ou de la m√™me table dans le cas d'une relation r√©flexive)_.
  Dans cet exemple, la cl√© √©trang√®re `table_2_id` de la table `table_1` est une r√©f√©rence √† la cl√© primaire `id` de la table `table_2`.
</Admonition>

Maintenant, j'ai une question pour vous... est-ce que vous savez ce qu'il se passe quand dans notre MCD,
une relation √† une cardinalit√© avec un `n` pour le maximum des deux c√¥t√©s ? _(`0,n` ou `1,n` par exemple)_

Eh bien... on se retrouve avec une table interm√©diaire !  
Cette table peut se nommer de diff√©rentes mani√®res.
Pour ma part, j'appelle √ßa une "table pivot" m√™me si on peut √©galement parler de "table de liaison"
ou encore de "table de jointure" _(et sans doute d'autres termes !)_.

<Admonition type="quote" title="Table pivot ? K√©zako ?">
  Le but d'une table pivot est de permettre de lier deux tables entre elles lorsque la relation entre ces deux tables est de type `n`.
  
  Cette table va stocker **uniquement** _(sauf besoin sp√©cifique)_ la valeur des cl√©s primaires des deux tables qu'elle relie.
  Et si tu as bien suivi, ces deux colonnes seront des cl√©s √©trang√®res qui pointeront vers les cl√©s primaires des tables qu'elles relient üòâ
</Admonition>

### Le Mod√®le Relationnel de Donn√©es _(MRD)_

Souffle un coup, parce qu'on vient de voir √©tait quand m√™me d√©j√† pas mal costaud ! ü•µ

C'est le moment d√©tente, parce que le **Mod√®le Relationnel de Donn√©es** est en fait une simple repr√©sentation textuelle de notre MLD.  
Pas besoin donc de sch√©ma, juste une liste de tables avec leurs colonnes !

Et toujours √† partir de notre exemple, voici le MRD correspondant.

> **table_1**(<u className='font-bold'>id</u>, colonne_2, colonne_3, colonne_4, <i className="italic">#table_2_id</i>)  
> **table_2**(<u className='font-bold'>id</u>, colonne_2, colonne_3)

Tu as vu ? Rien de bien m√©chant !

On vient reprendre une partie de l'√©criture que l'on retrouve dans le MLD, mais on ajoute des symboles pour indiquer les cl√©s √©trang√®res.

Le symbole `#` est utilis√© pour indiquer une cl√© √©trang√®re, en pr√©fixe du nom de la colonne.

Tu sais maintenant ce qu'il manque comme ajout majeur pour passer du MRD au MPD ?  
Je te le donne en mille : les **types de donn√©es** et leurs **contraintes** !

### Le Mod√®le Physique de Donn√©es _(MPD)_

Avant toute chose, permet moi de t'imposer _(tel le manitou que je suis üòÜ)_ une petite r√©vision des types de donn√©es que l'on retrouve en SQL.  
Et comme je ne suis pas m√©chant, voici une liste des types selon les SGBD les plus utilis√©s :

- [**PostgreSQL**](https://www.postgresql.org/docs/current/datatype.html)
- [**MySQL**](https://dev.mysql.com/doc/refman/9.0/en/data-types.html)
- [**SQL Server**](https://docs.microsoft.com/en-us/sql/t-sql/data-types/data-types-transact-sql?view=sql-server-ver15)
- [**SQLite**](https://www.sqlite.org/datatype3.html)
- [**Oracle**](https://docs.oracle.com/en/database/oracle/oracle-database/23/sqlrf/Data-Types.html)

_(D√©sol√© pour les autres SGBD, mais je ne peux pas tout mettre üòÖ)_

<Admonition type="quote" title="Mais pourquoi il me bassine avec les types de donn√©es ?">
  Parce que c'est important !  
  Les types de donn√©es permettent de d√©finir le format des donn√©es que l'on va stocker dans notre base de donn√©es.

  Chaque SGBD fixe ses propres types de donn√©es, mais on retrouve des similitudes entre eux.  
  On peut d'ailleurs retrouver quelque chose de tr√®s diff√©rent du c√¥t√© de
  [**MongoDB**](https://docs.mongodb.com/manual/reference/bson-types/) qui est une base de donn√©es NoSQL.
</Admonition>

Maintenant que tu as r√©vis√©, on peut r√©ellement passer au **Mod√®le Physique de Donn√©es** !

Le but du MPD est de se baser sur le MLD et d'y ajouter les types de donn√©es et les contraintes _(comme les cl√©s primaires par exemple)_.  
Bien que c'√©tait d√©j√† le cas dans le MLD, le MPD est plus pr√©cis et plus technique.

Le MPD peut se repr√©senter de deux mani√®res diff√©rentes :

- Un script pour cr√©er la base de donn√©es
- Un sch√©ma visuel _(encore un..)_ de la base de donn√©es

Je ne vais pas m'attarder sur le sch√©ma visuel, car il est tr√®s similaire au MLD avec uniquement les types de donn√©es et les contraintes en plus.

Par contre, je vais te montrer un exemple de script pour cr√©er une base de donn√©es √† partir de notre MLD.

```sql title="MPD sous forme de script SQL" showLineNumbers
CREATE TABLE IF NOT EXISTS table_1(
   id INT PRIMARY KEY,
   colonne_2 VARCHAR(50) NOT NULL,
   colonne_3 VARCHAR(80),
   colonne_4 TINYINT DEFAULT 0,
   table_2_id INT
);

CREATE TABLE IF NOT EXISTS table_2(
   id INT PRIMARY KEY,
   colonne_2 VARCHAR(50) NOT NULL,
   colonne_3 DATE
);

ALTER TABLE table_1
ADD FOREIGN KEY (table_2_id) REFERENCES table_2(id);
```

Et voil√† !  
Bien s√ªr, ce script est un exemple tr√®s simple, mais il te montre comment on peut passer d'un MLD √† un MPD.
