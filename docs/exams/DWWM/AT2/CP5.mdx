---
sidebar_position: 5
title: "CP 5"
---

import Admonition from "@theme/Admonition";

# Mettre en place une base de donn√©es relationnelle

## üìö R√©f√©rences

- REAC _(mise √† jour du 03/07/2024)_, pages 23 et 24
- RE _(mise √† jour du 03/07/2024)_, page 11

## üìã En r√©sum√©

Le front-end : c'est **fini** !  
Mais avant de nous attaquer au back-end d'un point de vue code, on va voir ce qui est attendu dans cette CP qui parle de la mise en place d'une base de donn√©es relationnelle.

<Admonition
  type="tip"
  icon="ü§î"
  title="Mais attend ! J'ai juste une base de donn√©es non relationnelle √† mettre en place, c'est bon ?"
>
  J'aurai aim√© te dire que oui, mais √ßa va √™tre un poil trop l√©ger pour cette
  comp√©tence... Mais garde sous la main ta base de donn√©es non relationnelles
  pour la prochaine comp√©tence, √ßa te servira üòâ
</Admonition>

Commen√ßons par le commencement : **comment cr√©er une base de donn√©es relationnelle ?**

Il y a pl√©thore de possibilit√©s, mais ici on va s'attarder sur une m√©thodologie fran√ßaise _(cocorico üêì)_ qui est la m√©thode **Merise**.  
On va se baser sur diff√©rents sch√©mas issus de cette m√©thode pour cr√©er notre base de donn√©es relationnelle, √† savoir :

1. Le **dictionnaire des donn√©es** : qui va recenser toutes les donn√©es que l'on va stocker par la suite dans notre base de donn√©es
2. Le **MCD** _(Mod√®le Conceptuel des Donn√©es)_ : qui va repr√©senter les donn√©es et leurs relations, sous la forme d'entit√©s et d'associations dans un sch√©ma graphique
3. Le **MLD** _(Mod√®le Logique des Donn√©es)_ : qui va repr√©senter les donn√©es sous forme de tables et de relations, dans un sch√©ma graphique
4. Le **MRD** _(Mod√®le Relationnel des Donn√©es)_ : qui va repr√©senter les m√™mes informations que le MLD, mais cette fois-ci en format texte
5. Le **MPD** _(Mod√®le Physique des Donn√©es)_ : qui va repr√©senter les donn√©es sous forme de tables et de relations, en int√©grant les types de donn√©es et les contraintes

Tu remarqueras que j'y ai indiqu√© un ordre dans la liste ci-dessus.  
Si je peux te donner un indice : ce n'est pas pour rien que c'est une liste ordonn√©e üòâ

Donc si tu r√©alises un dictionnaire de donn√©es apr√®s avoir fait ton MPD, c'est que tu n'as pas compris l'objectif du dictionnaire de donn√©es ! _(par exemple)_

## üóÇÔ∏è Le dictionnaire des donn√©es

L'objectif du dictionnaire des donn√©es est de recenser toutes les donn√©es que l'on va stocker dans notre base de donn√©es.  
L'id√©e est qu'il soit tr√®s simple et compr√©hensible par tout le monde, m√™me par quelqu'un qui n'y conna√Æt rien en base de donn√©es.

| Nom de la donn√©e                   | Format de la donn√©es | Longueur maximale attendue | Description de la donn√©e        | Exemple de donn√©e      |
| ---------------------------------- | -------------------- | -------------------------- | ------------------------------- | ---------------------- |
| Num√©ro d'identification du salari√© | Alphanum√©rique       | 30                         | -                               | -                      |
| Pr√©nom du salari√©                  | Alphab√©tique         | 30                         | -                               | Jean                   |
| Nom du salari√©                     | Alphab√©tique         | 30                         | -                               | Dupont                 |
| Adresse email du salari√©           | Alphanum√©rique       | 50                         | -                               | jean.dupont@exemple.fr |
| Adresse postale du salari√©         | Alphanum√©rique       | 60                         | -                               | 1 rue de la Paix       |
| Code postal du salari√©             | Alphanum√©rique       | 5                          | -                               | 75000                  |
| Ville du salari√©                   | Alphab√©tique         | 30                         | -                               | Paris                  |
| Mot de passe du salari√©            | Alphanum√©rique       | 80                         | Mot de passe s√©curis√© _(hash√©)_ | -                      |

... et ainsi de suite pour toutes les donn√©es que tu vas stocker dans ta base de donn√©es.

On peut constater qu'on ne fait appara√Ætre aucun terme technique, on se contente de d√©crire les donn√©es de mani√®re simple et compr√©hensible.
Grossi√®rement, voici les formats que l'on peut retrouver dans un dictionnaire des donn√©es :

- **Alphab√©tique** : pour les cha√Ænes de caract√®res contenant uniquement des lettres
- **Alphanum√©rique** : pour les cha√Ænes de caract√®res contenant des lettres et des chiffres
- **Num√©rique** : pour les nombres
- **Date** : pour les dates
- **Vrai/Faux** : pour les donn√©es bool√©ennes

<Admonition type="tip" icon="ü§î" title="Mais pourquoi le code postal est marqu√© en alphanum√©rique ?">
C'est une tr√®s bonne question figure-toi !

En France, le code postal est compos√© de 5 chiffres, mais il peut arriver que certains codes postaux commencent par un z√©ro.  
Or, si on stocke le code postal en num√©rique, on risque de perdre ce z√©ro au d√©but du code postal.

Exemple :

- `75000` -> `75000`
- `01000` -> `1000` _(on a perdu le z√©ro au d√©but)_

On retrouve √©galement ce cas de figure pour les num√©ros de t√©l√©phone, qui peuvent commencer par un z√©ro.

Toutefois il faut √©galement prendre en compte quelque chose... ici, l'exemple ne concerne que la France.  
Si demain on te demande de pr√©voir le fait que ton application puisse √™tre utilis√©e dans un autre pays, il faudra peut-√™tre revoir ce choix de format pour le code postal.  
Certains pays ont des codes postaux compos√©s de lettres et de chiffres, d'autres vont avoir jusqu'√† 9 caract√®res, etc.

‚¨áÔ∏è **Cas de figure sp√©cifique, et pourtant tr√®s important √† conna√Ætre** ‚¨áÔ∏è

Prenons l'exemple o√π l'on fait une application pour la France **uniquement**.  
En France, on consid√®re que l'indicatif des num√©ros de t√©l√©phone est `+33`. On serait donc tent√© de se dire :

> "Pas besoin de stocker l'indicatif puisque je veux uniquement enregistrer des num√©ros de t√©l√©phones fran√ßais."

Hmm.. vraiment ?  
Pourtant : la R√©union, la Guadeloupe, la Martinique, la Guyane et Mayotte sont bien des d√©partements fran√ßais, non ?

En regardant de plus pr√®s, les num√©ros de t√©l√©phone de ces d√©partements ne commencent pas par `+33` mais par `+262` pour la R√©union, `+590` pour la Guadeloupe, etc.

Il te faudra donc stocker les num√©ros de t√©l√©phone avec 13 caract√®res _(ou plus)_ pour √™tre s√ªr de ne pas perdre d'informations et t'assurer que ton application puisse √™tre utilis√©e partout en France et/ou dans le monde selon les besoins !

**Conclusion de ce pav√© :**  
Pensez √† vous renseigner sur les pays que vous ciblez pour votre application, √ßa peut vous √©viter des erreurs de conception üòâ

</Admonition>

## üìä Le MCD

Tout comme le dictionnaire des donn√©es, le MCD a pour objectif de repr√©senter les donn√©es et leurs relations, mais cette fois-ci sous forme graphique.
On va √©galement d√©couper davantage nos donn√©es en les faisant appara√Ætre dans des entit√©s distinctes.

On fera attention √† ne pas √™tre technique, comme pour le dictionnaire des donn√©es, et on va se contenter de repr√©senter les donn√©es et leurs relations.
Ce document est avant tout destin√© √† √™tre compris par tout le monde, notamment le client final.

<details>

<summary>Exemple de MCD</summary>

**The name comes from Objective-C and Swift-UI**: [method swizzling](https://pspdfkit.com/blog/2019/swizzling-in-swift/) is the process of changing the implementation of an existing selector (method).

**For Docusaurus, component swizzling means providing an alternative component that takes precedence over the component provided by the theme.**

You can think of it as [Monkey Patching](https://en.wikipedia.org/wiki/Monkey_patch) for React components, enabling you to override the default implementation. Gatsby has a similar concept called [theme shadowing](https://www.gatsbyjs.com/docs/how-to/plugins-and-themes/shadowing/).

To gain a deeper understanding of this, you have to understand [how theme components are resolved](./advanced/client.mdx#theme-aliases).

</details>

## üéØ Crit√®res d'√©valuation

- Les donn√©es du sch√©ma conceptuel et leurs relations sont identifi√©es et prises en compte
- Le sch√©ma physique est conforme aux besoins exprim√©s dans le dossier de conception et respecte les r√®gles des bases de donn√©es relationnelles
- Les r√®gles de nommage sont respect√©es
- La s√©curit√©, l'int√©grit√© et la confidentialit√© des donn√©es est assur√©e
- La base de donn√©es de tests mise en place est conforme au sch√©ma physique
- Les utilisateurs sont cr√©√©s avec leurs droits respectifs conform√©ment au dossier de conception
- La base de donn√©es cr√©√©e est sauvegard√©e et elle peut √™tre restaur√©e en cas d'incident
- La documentation technique des bases de donn√©es est comprise, en langue fran√ßaise ou anglaise _(niveau B1 du CECRL pour l'anglais)_

## ü§Ø Aller plus loin _(hors r√©f√©rentiel)_

---

## üß† Documentations

## üõ†Ô∏è Outils
