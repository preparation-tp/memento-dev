---
sidebar_position: 5
title: "CP 5"
---

import Admonition from "@theme/Admonition";

# Mettre en place une base de donn√©es relationnelle

## üìö R√©f√©rences

- REAC _(mise √† jour du 03/07/2024)_, pages 23 et 24
- RE _(mise √† jour du 03/07/2024)_, page 11

## üìã En r√©sum√©

Le front-end : c'est **fini** !  
Mais avant de nous attaquer au back-end d'un point de vue code, on va voir ce qui est attendu dans cette CP qui parle de la mise en place d'une base de donn√©es relationnelle.

<Admonition
  type="quote"
  title="Mais attend ! J'ai juste une base de donn√©es non relationnelle √† mettre en place, c'est bon ?"
>
  J'aurai aim√© te dire que oui, mais √ßa va √™tre un poil trop l√©ger pour cette comp√©tence...  
  Mais garde sous la main ta base de donn√©es non relationnelles
  pour la prochaine comp√©tence, √ßa te servira üòâ
</Admonition>

## üé® Mod√©lisation de la base de donn√©es

Commen√ßons par le commencement : **comment cr√©er une base de donn√©es relationnelle ?**

Il y a pl√©thore de possibilit√©s, mais ici on va s'attarder sur une m√©thodologie fran√ßaise _(cocorico üêì)_ qui est la m√©thode **Merise**.  
On va se baser sur diff√©rents sch√©mas issus de cette m√©thode pour cr√©er notre base de donn√©es relationnelle, √† savoir :

1. Le **dictionnaire des donn√©es** : qui va recenser toutes les donn√©es que l'on va stocker par la suite dans notre base de donn√©es
2. Le **MCD** _(Mod√®le Conceptuel des Donn√©es)_ : qui va repr√©senter les donn√©es et leurs relations, sous la forme d'entit√©s et d'associations dans un sch√©ma graphique
3. Le **MLD** _(Mod√®le Logique des Donn√©es)_ : qui va repr√©senter les donn√©es sous forme de tables et de relations, dans un sch√©ma graphique
4. Le **MRD** _(Mod√®le Relationnel des Donn√©es)_ : qui va repr√©senter les m√™mes informations que le MLD, mais cette fois-ci en format texte
5. Le **MPD** _(Mod√®le Physique des Donn√©es)_ : qui va repr√©senter les donn√©es sous forme de tables et de relations, en int√©grant les types de donn√©es et les contraintes

Tu remarqueras que j'y ai indiqu√© un ordre dans la liste ci-dessus.  
Si je peux te donner un indice : ce n'est pas pour rien que c'est une liste ordonn√©e üòâ

Donc si tu r√©alises un dictionnaire de donn√©es apr√®s avoir fait ton MPD, c'est que tu n'as pas compris l'objectif du dictionnaire de donn√©es ! _(par exemple)_

### üóÇÔ∏è Le dictionnaire des donn√©es

L'objectif du dictionnaire des donn√©es est de recenser toutes les donn√©es que l'on va stocker dans notre base de donn√©es.  
L'id√©e est qu'il soit tr√®s simple et compr√©hensible par tout le monde, m√™me par quelqu'un qui n'y conna√Æt rien en base de donn√©es.

<details>

<summary>Exemple de dictionnaire de donn√©es</summary>

| Nom de la donn√©e                   | Format de la donn√©es | Longueur maximale attendue | Description de la donn√©e        | Exemple de donn√©e      |
| ---------------------------------- | -------------------- | -------------------------- | ------------------------------- | ---------------------- |
| Num√©ro d'identification du salari√© | Alphanum√©rique       | 30                         | -                               | -                      |
| Pr√©nom du salari√©                  | Alphab√©tique         | 30                         | -                               | Jean                   |
| Nom du salari√©                     | Alphab√©tique         | 30                         | -                               | Dupont                 |
| Adresse email du salari√©           | Alphanum√©rique       | 50                         | -                               | jean.dupont@exemple.fr |
| Adresse postale du salari√©         | Alphanum√©rique       | 60                         | -                               | 1 rue de la Paix       |
| Code postal du salari√©             | Alphanum√©rique       | 5                          | -                               | 75000                  |
| Ville du salari√©                   | Alphab√©tique         | 30                         | -                               | Paris                  |
| Mot de passe du salari√©            | Alphanum√©rique       | 80                         | Mot de passe s√©curis√© _(hash√©)_ | -                      |

... et ainsi de suite pour toutes les donn√©es que tu vas stocker dans ta base de donn√©es.

</details>

On peut constater qu'on ne fait appara√Ætre aucun terme technique, on se contente de d√©crire les donn√©es de mani√®re simple et compr√©hensible.
Grossi√®rement, voici les formats que l'on peut retrouver dans un dictionnaire des donn√©es :

- **Alphab√©tique** : pour les cha√Ænes de caract√®res contenant uniquement des lettres
- **Alphanum√©rique** : pour les cha√Ænes de caract√®res contenant des lettres et des chiffres
- **Num√©rique** : pour les nombres
- **Date** : pour les dates
- **Vrai/Faux** : pour les donn√©es bool√©ennes

<details>

<summary>
  Mais pourquoi le code postal est marqu√© en alphanum√©rique ? ü§î
</summary>

C'est une tr√®s bonne question figure-toi !

En France, le code postal est compos√© de 5 chiffres, mais il peut arriver que certains codes postaux commencent par un z√©ro.  
Or, si on stocke le code postal en num√©rique, on risque de perdre ce z√©ro au d√©but du code postal.

Exemple :

- `75000` -> `75000`
- `01000` -> `1000` _(on a perdu le z√©ro au d√©but)_

On retrouve √©galement ce cas de figure pour les num√©ros de t√©l√©phone, qui peuvent commencer par un z√©ro.

Toutefois il faut √©galement prendre en compte quelque chose... ici, l'exemple ne concerne que la France.  
Si demain on te demande de pr√©voir le fait que ton application puisse √™tre utilis√©e dans un autre pays, il faudra peut-√™tre revoir ce choix de format pour le code postal.  
Certains pays ont des codes postaux compos√©s de lettres et de chiffres, d'autres vont avoir jusqu'√† 9 caract√®res, etc.

‚¨áÔ∏è **Cas de figure sp√©cifique, et pourtant tr√®s important √† conna√Ætre** ‚¨áÔ∏è

Prenons l'exemple o√π l'on fait une application pour la France **uniquement**.  
En France, on consid√®re que l'indicatif des num√©ros de t√©l√©phone est `+33`. On serait donc tent√© de se dire :

> "Pas besoin de stocker l'indicatif puisque je veux uniquement enregistrer des num√©ros de t√©l√©phones fran√ßais."

Hmm.. vraiment ?  
Pourtant : la R√©union, la Guadeloupe, la Martinique, la Guyane et Mayotte sont bien des d√©partements fran√ßais, non ?

En regardant de plus pr√®s, les num√©ros de t√©l√©phone de ces d√©partements ne commencent pas par `+33` mais par `+262` pour la R√©union, `+590` pour la Guadeloupe, etc.

Il te faudra donc stocker les num√©ros de t√©l√©phone avec 13 caract√®res _(ou plus)_ pour √™tre s√ªr de ne pas perdre d'informations et t'assurer que ton application puisse √™tre utilis√©e partout en France et/ou dans le monde selon les besoins !

**Conclusion de ce pav√© :**  
Pensez √† vous renseigner sur les pays que vous ciblez pour votre application, √ßa peut vous √©viter des erreurs de conception üòâ

</details>

### üìä Le MCD

Tout comme le dictionnaire des donn√©es, le MCD a pour objectif de repr√©senter les donn√©es et leurs relations, mais cette fois-ci sous forme graphique.
On va √©galement d√©couper davantage nos donn√©es en les faisant appara√Ætre dans des entit√©s distinctes.

On fera attention √† ne pas √™tre technique, comme pour le dictionnaire des donn√©es, et on va se contenter de repr√©senter les donn√©es et leurs relations.
Ce document est avant tout destin√© √† √™tre compris par tout le monde, notamment le client final.

<details>

<summary>Exemple de MCD</summary>

![Exemple de MCD, mod√®le conceptuel de donn√©es, Merise](@site/static/merise/mcd.webp)

</details>

Sur ce sch√©ma, on peut distinguer deux entit√©s : `Salari√©` et `Cong√©`. Elles sont repr√©sent√©es par des rectangles et contiennent leurs diff√©rentes propri√©t√©s.  
On peut √©galement remarquer d'autres √©l√©ments, comme des "bulles" bleues qui repr√©sentent les relations entre les entit√©s. On y retrouve des verbes √† l'infinitif qui d√©crivent la relation entre les entit√©s.

Mais entre ces verbes et les entit√©s, il y a des chiffres _(et parfois un `n` qui se balade)_, ce sont les fameuses **cardinalit√©s**.

Ce sch√©ma nous apprend donc que :

- `Salari√©` - G√âRER - `Salari√©` _(Relation r√©flexive)_
  - Un m√™me salari√© peut g√©rer plusieurs autres salari√©s _(`Salari√©` 0,n - G√âRER - `Salari√©` 0,1)_
  - Un salari√© peut n'avoir aucun ou qu'un seul manager _(`Salari√©` 0,1 - G√âRER - `Salari√©` 0,n)_
- `Salari√©` - R√âALISER - `T√¢che`
  - Un salari√© peut r√©aliser plusieurs t√¢ches _(`Salari√©` 0,n - R√âALISER - `T√¢che` 1,n)_
  - Une t√¢che est r√©alis√©e par un ou plusieurs salari√©s _(`T√¢che` 0,n - R√âALISER - `Salari√©` 1,n)_
- `T√¢che` - ATTRIBUER - `Projet`
  - Une t√¢che est attribu√©e √† un seul projet _(`T√¢che` 1,1 - ATTRIBUER - `Projet` 0,n)_
  - Un projet peut contenir plusieurs t√¢ches _(`Projet` 0,n - ATTRIBUER - `T√¢che` 1,1)_

<details>

<summary>Mais pourquoi il n'y a pas les ID dans le sch√©ma ? ü§î</summary>

Ni les cl√©s √©trang√®res d'ailleurs...  
Tout simplement parce que les ID ne sont pas des donn√©es √† proprement parler. Ce sont avant tout des identifiants qui permettent de diff√©rencier les entit√©s entre elles, d'un point de vue technique.

Sauf s'il s'agit d'une donn√©e concr√®te _(comme le num√©ro de badge de salari√©, un num√©ro de s√©curit√© sociale, un ISBN pour un livre, etc.)_, on ne les fait pas appara√Ætre dans le MCD. Cependant, on peut noter que ce n'est pas pour autant que nous n'avons pas de discriminant dans nos entit√©s ! On peut tr√®s bien voir la propri√©t√© `adresse email` dans l'entit√© `Salari√©` qui pourrait servir de discriminant, puisque chaque salari√© a une adresse email unique.

</details>

Ce document peut √™tre r√©alis√© √† l'aide de divers outils, mais je vous recommande chaudement le logiciel [Looping](https://www.looping.fr/) qui est gratuit et tr√®s simple d'utilisation.  
Certes... il semble tout droit sorti des ann√©es 90, mais il est adapt√© √† la r√©alisation de sch√©mas de la m√©thodologie Merise !

Et si tu utilises ou utilisais [Mocodo](https://www.mocodo.net/), fais tr√®s attention ! Certes, l'outil est tr√®s puissant et permet tout de m√™me de r√©aliser des MCD, mais contrairement √† Looping il ne va pas t'imposer de respecter les r√®gles de la m√©thode Merise.

Pratique d'un c√¥t√©, mais pas fiable donc... √† moins que tu sois un‚∏±e expert‚∏±e en Merise et que tu veuilles te passer de Looping !

### üìà Le MLD

Cette fois-ci, on va passer √† la vitesse sup√©rieure en repr√©sentant nos donn√©es sous forme de tables et de relations !  
Les termes techniques ont alors enti√®rement leur place dans ce document, puisqu'il est destin√© aux d√©veloppeurs qui vont mettre en place la base de donn√©es.

<details>

<summary>Exemple de MLD</summary>

![Exemple de MLD, mod√®le logique de donn√©es, Merise](@site/static/merise/mld.webp)

</details>

Et voil√† un peu de changement !

D√©j√†, on peut dire au revoir aux entit√©s et aux relations, et bonjour aux tables et aux cl√©s √©trang√®res üéâ !  
On peut aussi voir que certaines de nos propri√©t√©s ont chang√© de nom, comme `num√©ro d'identification` de l'entit√© `Salari√©` qui est devenu `id` pour la table `employee`.

On peut √©galement voir que nos relations ont √©t√© transform√©es en cl√©s √©trang√®res, qui permettent de lier nos tables entre elles et si n√©cessaire : en table de jointure _(comme pour la relation `Salari√©` - R√âALISER - `T√¢che`)_.

Et pour finir : tous les termes ont √©t√© traduits du fran√ßais vers l'anglais.

<Admonition type="warning" title="Langue utilis√©e dans la base de donn√©es">
De mani√®re simple : il n'y a pas de r√®gle. Cependant, il est recommand√© d'utiliser une seule langue pour nommer les tables, les colonnes, les cl√©s, etc dans une base de donn√©es.  
Pour choisir cette langue, il est recommand√© de se baser sur la langue de travail de l'entreprise ou de l'√©quipe de d√©veloppement.

Si tu travailles exclusivement avec des francophones : tu as bien √©videmment le droit de nommer tes tables et colonnes en fran√ßais.  
Cependant, si au moindre moment tu as besoin de travailler avec des anglophones ou des personnes qui ne sont pas francophones : Shakespeare sera ton ami üìú

_(Bon, si tu travailles dans une entreprise espagnole, tu peux aussi opter pour l'espagnol √† contrario du fran√ßais... mais tu as compris l'id√©e)_

Le plus important dans l'histoire, c'est d'√™tre **coh√©rent** dans le choix de la langue utilis√©e.  
Tu as commenc√© par utiliser de l'anglais pour parler des √©l√©ments techniques ? Alors tu te dois de tout faire en anglais.

</Admonition>

### üìë Le MRD

La plupart du temps, le MRD est r√©alis√© sous le nom de MLD mais en format texte.  
En r√©alit√©, le MRD est la repr√©sentation textuelle du MLD.

Mais si √ßa te rassure, on ne t'en voudra pas si tu parles de "MLD" √† la place de "MRD" üòÖ

On peut donc dire qu'au choix, on peut soit faire un MLD sous forme de sch√©ma, soit sous forme de texte _(et dans ce cas, on parle de MRD)_.  
Mais si tu as l'occasion de faire les deux, c'est encore mieux !

<details>

<summary>Exemple de MRD</summary>

employee(<u class="font-bold underline">id</u>, **email**, firstname, lastname, postal_address, postal_code, city, password, <i class="italic">#manager_id</i>);  
project(<u class="font-bold underline">id</u>, name);  
task(<u class="font-bold underline">id</u>, name, is_done, <i class="italic">#project_id</i>);  
employee_has_task(#employee_id, <i class="italic">#task_id</i>);

</details>

Si tu veux comprendre pourquoi certains √©l√©ments sont en gras, en italique ou soulign√©s, voici un court r√©sum√© :

- <u class="underline">Sous-lign√©</u> : Cl√© primaire _(en gras √©galement car unique,
  voir ci-dessous)_
- **Gras** : Donn√©e unique au sein de la table
- _Italique_ : Cl√© √©trang√®re

### üì¶ Le MPD

Maintenant on ne rigole plus, on met les mains dans le cambouis ! üßë‚Äçüîß

Puisque tous nos sch√©mas sont pr√™ts, on va pouvoir passer √† la cr√©ation de notre base de donn√©es.  
Mais si on y repense, notre MLD repr√©sente d√©j√† bien notre base de donn√©es, non ?

Pas enti√®rement... car il nous manque les types de donn√©es !  
Si on reprend notre dictionnaire des donn√©es, on avait pu inscrire "Alphab√©tique" et d'autres formats g√©n√©riques pour nos donn√©es. Mais ces termes n'existent pas _(du moins, pas tous)_ dans les bases de donn√©es.

<Admonition type="warning" title="Sp√©cificit√©s des SGBD">
  Selon le SGBD que tu utilises, les types de donn√©es peuvent varier. Il est
  donc obligatoire que tu te r√©f√®res √† la documentation de ton SGBD pour
  conna√Ætre les types de donn√©es disponibles üòâ
</Admonition>

Au passage, le MPD peut se d√©cliner dans deux formats :

- **Le format texte** : qui reprend les informations du MLD en y ajoutant les types de donn√©es et les contraintes. En r√©alit√©, il s'agira d'un script SQL qui permettra de cr√©er la base de donn√©es et toutes ses tables.
- **Le format graphique** : qui reprend les informations du MLD en y ajoutant les types de donn√©es et les contraintes, mais sous forme de sch√©ma.

Cependant je mets en garde sur le format graphique et la notation que peuvent proposer certains logiciels. Vous avez peut-√™tre eu l'occasion de voir des sch√©mas avec des carr√©s, des ronds, des losanges ou encore des pattes de corbeau... Cette notation est propre √† un langage de mod√©lisation, le **UML** _(Unified Modeling Language)_, qui ne correspond pas √† la m√©thode Merise.

Dans la m√©thode Merise, on utilisera simplement des lignes pleines pour repr√©senter les relations entre les tables, et des carr√©s pour repr√©senter les tables.
On retrouvera tout de m√™me des lignes fl√©ch√©es pour illustrer nos relations dans le MLD, mais c'est tout.

UML est un excellent langage de mod√©lisation, mais on y reviendra davantage dans le cursus CDA üòâ

<details>

<summary>Exemple de MPD _(SQL)_</summary>

```sql showLineNumbers
CREATE TABLE employee(
   id CHAR(30),
   email VARCHAR(320),
   firstname VARCHAR(30),
   lastname VARCHAR(30),
   postal_address VARCHAR(60),
   postal_code CHAR(5),
   city VARCHAR(30),
   password CHAR(80),
   manager_id CHAR(30),
   CONSTRAINT employee_pk PRIMARY KEY (id),
   CONSTRAINT employee_ak UNIQUE (email),
   CONSTRAINT employee_manager_fk FOREIGN KEY (manager_id) REFERENCES employee(id)
);

CREATE TABLE project(
   id CHAR(30),
   name VARCHAR(255),
   CONSTRAINT project_pk PRIMARY KEY (id)
);

CREATE TABLE task(
   id CHAR(30),
   name VARCHAR(255),
   is_done BOOLEAN,
   project_id CHAR(30),
   CONSTRAINT task_pk PRIMARY KEY (id),
   CONSTRAINT task_project_fk FOREIGN KEY (project_id) REFERENCES project(id)
);

CREATE TABLE employee_has_task(
   employee_id CHAR(30),
   task_id CHAR(30),
   CONSTRAINT employee_has_task_pk PRIMARY KEY (employee_id, task_id),
   CONSTRAINT employee_has_task_employee_fk FOREIGN KEY (employee_id) REFERENCES employee(id),
   CONSTRAINT employee_has_task_task_fk FOREIGN KEY (task_id) REFERENCES task(id)
);
```

</details>

## üíæ Sauvegardes de la base de donn√©es

C'est bien beau de cr√©er une base de donn√©es, mais si on ne la sauvegarde pas, on risque de tout perdre en cas de probl√®me...

Certains h√©bergeurs permettent de faire des sauvegardes automatis√©es, mais dans le cas o√π tu dois toi-m√™me sauvegarder ta base de donn√©es, il existe plusieurs solutions :

- **Les sauvegardes manuelles** : qui consistent √† exporter le contenu de ta base de donn√©es dans un fichier _(g√©n√©ralement au format SQL)_
- **Les sauvegardes automatiques** : qui consistent √† automatiser le processus de sauvegarde, g√©n√©ralement via un script ou un outil d√©di√©

On va se concentrer _(que tr√®s rapidement, ne t'inqui√®te pas !)_ sur la partie automatis√©e, puisqu'elle permet √©galement de comprendre comment faire une sauvegarde manuellement.

Pour mettre en place l'automatisation, on peut mettre en place une t√¢che planifi√©e : un processus qui va s'ex√©cuter √† intervalles r√©guliers pour sauvegarder notre base de donn√©es.  
Sur Linux, on parlera d'un `cron job` _(ou `t√¢che cron` en fran√ßais)_.

Sans rentrer dans les d√©tails de configuration d'une t√¢che cron, on va devoir la cr√©er en donnant plusieurs informations :

- **Le chemin vers le script de sauvegarde** : qui va contenir les commandes pour sauvegarder notre base de donn√©es
- **La fr√©quence d'ex√©cution** : qui va d√©terminer √† quelle fr√©quence notre t√¢che va s'ex√©cuter _(toutes les heures, tous les jours, toutes les semaines, etc.)_
- **Le compte utilisateur** : qui va ex√©cuter la t√¢che, g√©n√©ralement le compte de l'utilisateur qui a les droits d'acc√®s √† la base de donn√©es

<details>

<summary>
  Exemple de script `bash` pour sauvegarder une base de donn√©es PostgreSQL
</summary>

```bash showLineNumbers
#!/bin/bash

# Variables
DB_USER="user"
DB_NAME="database"
BACKUP_DIR="/path/to/backup"
DATE=$(date +"%Y%m%d%H%M%S")

# Cr√©ation du r√©pertoire de sauvegarde
mkdir -p $BACKUP_DIR

# Sauvegarde de la base de donn√©es
pg_dump -U $DB_USER $DB_NAME > $BACKUP_DIR/$DB_NAME-$DATE.sql
```

Ce script va permettre de sauvegarder une base de donn√©es PostgreSQL en exportant son contenu dans un fichier SQL.  
Il est important de remplacer les variables `DB_USER`, `DB_NAME` et `BACKUP_DIR` par les informations de ta base de donn√©es.

</details>

Une fois ce script cr√©√©, il suffira de le rendre ex√©cutable et de le planifier dans une t√¢che cron pour automatiser la sauvegarde de ta base de donn√©es.

<details>

<summary>Exemple de t√¢che cron pour automatiser la sauvegarde</summary>

```shell
# Ouvrir le fichier de t√¢ches cron
crontab -e

# Ajouter la t√¢che de sauvegarde, toutes les nuits √† minuit
0 * * * * /path/to/backup.sh
```

Et voil√† ! Ta base de donn√©es sera sauvegard√©e toutes les nuits √† minuit, sans que tu aies besoin d'intervenir manuellement.

</details>

## üõ°Ô∏è S√©curit√© et confidentialit√© des donn√©es

On ne le r√©p√©tera jamais assez, mais la s√©curit√© et la confidentialit√© des donn√©es sont primordiales pour toute application.

Pour garantir la s√©curit√© de ta base de donn√©es, il est recommand√© de mettre en place plusieurs mesures :

- **Les sauvegardes r√©guli√®res** : pour √©viter de perdre des donn√©es en cas de probl√®me
- **Les mises √† jour r√©guli√®res** : pour corriger les failles de s√©curit√© et les bugs
- **Les acc√®s restreints** : pour limiter l'acc√®s √† la base de donn√©es aux seules personnes autoris√©es
- **Les mots de passe forts** : pour √©viter les attaques par force brute ou par dictionnaire
- **Les connexions s√©curis√©es** : pour √©viter les interceptions de donn√©es

Mais la s√©curit√© ne s'arr√™te pas l√†, il est √©galement important de garantir la confidentialit√© des donn√©es :

- **Le chiffrement des donn√©es** : pour √©viter que des tiers puissent lire les donn√©es stock√©es, en cas de fuite

<Admonition type="warning" title="Identifiants de connexion">
M√™me en d√©veloppement sur ta machine locale, prend l'habitude de ne jamais utiliser les identifiants par d√©faut de ta base de donn√©es _(comme `root` sans mot de passe par exemple)_.

L'objectif est de te mettre dans les conditions r√©elles d'un environnement de production, o√π la s√©curit√© est primordiale. √áa t'√©vitera de prendre de mauvaises habitudes qui pourraient te co√ªter cher par la suite.

</Admonition>

## üéØ Crit√®res d'√©valuation

- Les donn√©es du sch√©ma conceptuel et leurs relations sont identifi√©es et prises en compte
- Le sch√©ma physique est conforme aux besoins exprim√©s dans le dossier de conception et respecte les r√®gles des bases de donn√©es relationnelles
- Les r√®gles de nommage sont respect√©es
- La s√©curit√©, l'int√©grit√© et la confidentialit√© des donn√©es est assur√©e
- La base de donn√©es de tests mise en place est conforme au sch√©ma physique
- Les utilisateurs sont cr√©√©s avec leurs droits respectifs conform√©ment au dossier de conception
- La base de donn√©es cr√©√©e est sauvegard√©e et elle peut √™tre restaur√©e en cas d'incident
- La documentation technique des bases de donn√©es est comprise, en langue fran√ßaise ou anglaise _(niveau B1 du CECRL pour l'anglais)_

## ü§Ø Aller plus loin _(hors r√©f√©rentiel)_

Pas trop mal √† la t√™te ? On continue un tout petit peu ? üòÖ  
Tu as vu qu'on pr√©cise entre parenth√®ses la longueur des donn√©es, mais pourquoi on fait √ßa ?

Tu n'es pas sans savoir que pour stocker des donn√©es et que pour les stocker, il nous faut de l'espace.  
Et cet espace, on le d√©finit en fonction de la longueur de nos donn√©es : on parle alors d'allocation.

En pr√©cisant une valeur entre les parenth√®ses, on vient dire √† notre SGBD combien de place il doit r√©server pour stocker nos donn√©es **au maximum**.

Dans le cas d'un `VARCHAR(30)`, on r√©serve 30 caract√®res pour stocker notre donn√©e, m√™me si elle n'en fait que 5 _(allocation **dynamique**)_.  
Dans le cas d'un `CHAR(30)`, on r√©serve √©galement 30 caract√®res, mais cette fois-ci on "compl√®te notre donn√©e avec des espaces" pour atteindre les 30 caract√®res _(allocation **statique**)_.

Si on ne pr√©cise pas de longueur, le SGBD va r√©server une place par d√©faut qui varie d'un SGBD √† l'autre.  
Donc ce n'est pas parce que tu te dis : "255 caract√®res c'est tr√®s bien pour mon `VARCHAR`, pas besoin de le pr√©ciser puisque c'est la valeur par d√©faut !" que tu as raison... üòÖ  
Si demain la norme change et que l'allocation par d√©faut pour les types `VARCHAR` passe √† 100 caract√®res au lieu de 255 caract√®res, tu risques de te retrouver avec des donn√©es tronqu√©es !

---

## üß† Documentations

- [√âditions ENI - Merise - Guide pratique (3e √©dition), par **Jean-Luc Baptiste**](https://www.editions-eni.fr/livre/merise-guide-pratique-3e-edition-modelisation-des-donnees-et-des-traitements-manipulations-avec-le-langage-sql-9782409015342)
- [Medium - Non, les ID n'ont pas leur place dans un MCD, par **Jean Pruli√®re**](https://jeanpruliere.medium.com/non-les-id-nont-pas-leur-place-dans-un-mcd-43b5cd5ce9b6)
- [SQL.sh - Cours et tutoriels SQL](https://sql.sh/)
- [Wikip√©dia - UML](<https://fr.wikipedia.org/wiki/UML_(informatique)>)

## üõ†Ô∏è Outils

- [Looping - Logiciel de mod√©lisation conceptuelle de donn√©es](https://www.looping-mcd.fr/)
- [Mocodo - Logiciel en ligne de mod√©lisation conceptuelle de donn√©es](https://www.mocodo.net/)
